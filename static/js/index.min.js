function calc(){str=dataRes.value,INDEX=sign.indexOf(str),resName=dataAll[INDEX].children[0].getAttribute("data-name"),calc_formula=dataRes.value+"="+formula.value,"="==calc_formula.trim()&&(calc_formula=initFormula),result=eval(calc_formula),calcRes.innerHTML=result}function showCharts(){for(var a=0;a<chartsNum;a++)charts[a].style.display="none",this==chartNav.children[a]&&(currentChart=this.dataset.type,charts[a].style.display="block")}var doc=document,chartNav=doc.getElementsByClassName("j-chartlist-wrap")[0],charts=doc.getElementsByClassName("contain"),chartsNum=chartNav.children.length,chartName=doc.getElementById("chart-name"),makeChartBtn=doc.getElementsByClassName("make-chart")[0],chartsWrap=doc.getElementsByClassName("cont")[0],formula=doc.getElementById("chart-formula"),calcBtn=doc.getElementsByClassName("j-calc-btn")[0],calcRes=doc.getElementsByClassName("j-calc-res")[0],initFormula=formula.getAttribute("placeholder"),dataRes=doc.getElementsByClassName("j-data-res")[0],dataAll=doc.getElementsByClassName("j-data-wrap"),dataSign=doc.getElementsByClassName("j-data-sign"),result=0,sign="abcdefjhigklmnopqrstuvwxyz",str="",resName="",INDEX=0,arr=[],calc_formula="",dataCheckBox=doc.getElementsByClassName("j-data-show"),table=doc.getElementsByClassName("info-table")[0];calcBtn.onclick=calc;for(var i=0;i<dataAll.length;i++)dataSign[i].innerText=sign[i],arr[sign[i]]=1*dataAll[i].children[1].innerText;var a=arr.a,b=arr.b,c=arr.c,d=arr.d,e=arr.e,f=arr.f;table.onclick=function(a){var a=a||a.window,t=a.target||a.srcElement;if("input"==t.nodeName.toLowerCase()){var e=t.getAttribute("data-id");$.ajax({url:"/show_data/",data:{select:t.checked,checkId:e},success:function(){window.location.reload()}})}},chartName.onblur=function(){$.ajax({url:"/set_chart/",async:!0,data:{chart_type:currentChart,chart_tit:chartName.value},success:function(a){a=JSON.parse(a)}})},makeChartBtn.onclick=function(){data={chart_type:currentChart,chart_tit:chartName.value,info_value:result,info_name:resName,opt:"true",chart_formula:calc_formula},$.ajax({url:"/index/",async:!0,data:data,success:function(a){window.location.reload()}})};for(var currentChart="pie",i=0;i<chartsNum;i++)chartNav.children[i].onclick=showCharts;