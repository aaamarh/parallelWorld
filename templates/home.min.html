<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>Document</title><link rel="stylesheet" href="{{ url_for('static', filename='./css/normalize.css') }}"><link rel="stylesheet" href="{{ url_for('static', filename='./css/index.css') }}">{% for jsfile_name in script_list %}<script src="{{ host }}/{{ jsfile_name }}.js"></script>{% endfor %}<script src="https://lib.baomitu.com/jquery/3.3.1/jquery.js"></script><script src="{{ url_for('static', filename='threelib/js/three.js')}}"></script><script src="{{ url_for('static', filename='threelib/js/OrbitControls.js')}}"></script><script src="{{ url_for('static', filename='threelib/js/OBJLoader.js')}}"></script><script src="{{ url_for('static', filename='threelib/js/MTLLoader.js')}}"></script><script src="{{ url_for('static', filename='threelib/js/DragControls.js')}}"></script><script src="{{ url_for('static', filename='threelib/js/TransformControls.js')}}"></script><script src="{{ url_for('static', filename='threelib/js/stats.min.js')}}"></script><script src="{{ url_for('static', filename='threelib/js/dat.gui.min.js')}}"></script></head><body><div class="m-contain f-pr"><div class="login f-clear"><div class="logo f-clear f-l"><img class="f-l" src="{{ url_for('static', filename='./images/logo.png') }}" alt=""><!-- <div class="">	 --> <span>国家军事</span> <span>National military</span><!-- </div> --></div></div><div class="chart-tags"><div class="chart-tag-wrap f-pr f-clear"><div class="chart-tag f-l f-pr"><div class="icon f-pa"></div><a href="javascript:;">饼状图</a></div><div class="chart-tag f-l f-pr"><div class="icon f-pa"></div><a href="javascript:;">柱状图</a></div><div class="chart-tag f-l f-pr"><div class="icon f-pa"></div><a href="javascript:;">雷达图</a></div><div class="chart-tag f-l f-pr"><div class="icon f-pa"></div><a href="javascript:;">漏斗图</a></div><div class="chart-tag f-l f-pr"><div class="icon f-pa"></div><a href="javascript:;">热力图</a></div><div class="chart-tag f-l f-pr"><div class="icon f-pa"></div><a href="javascript:;">关系图</a></div></div></div><div class="webgl"><div id="Stats-output"></div><div id="WebGl-output"></div><div class="range-slider custom-range"><div class="range-bar"></div><div class="range-bar range-bar-active"></div><span class="range-slider-tooltip"></span></div></div><div class="chart-rt f-pa"><div class="tp"><h3>XXX视图</h3><div class="chart"></div></div><div class="btm"><h3>军队占比</h3><div class="chart">{{ pie_chart|safe }}<!--<div class="contain">--><!--<div id="{{ pie_id }}"--><!--style="margin:0 auto; width:{{ my_width }}%; height:{{ my_height }}%;"></div>--><!--</div>--></div></div></div><div class="chart-lt"><div class="g-chart"></div></div></div><script>function ascSort(e,t){return e-t}function ctrlTrack(){if(pastTime=Math.floor((sysTime-rgMin)/1e3),currentWidth=pastTime/rgTime*100,sysTime+=1e3,sysTime-1e3===parseInt(rgMax)&&(rgTrack.style.right="0%",sysTime=parseInt(rgMax)),signal){currentWidth=trackWidth/range.offsetWidth*100,currentWidth>100&&(currentWidth=100),sysTime=1*rgMin+1e3*Math.floor(rgTime*(currentWidth/100));var e=sysTime;if(console.log(sysTime),console.log(jsonData[e]),jsonData[e])tank_axisx=jsonData[sysTime].x,tank_axisy=jsonData[sysTime].y,tank_axisz=jsonData[sysTime].z;else for(;;)if(e-=1e3,jsonData[e]){tank_axisx=jsonData[e].x,tank_axisy=jsonData[e].y,tank_axisz=jsonData[e].z;break}signal=!1}rgTrack.style.right=100-currentWidth+"%"}function mosDown(e){var e=e||window.event;disX=e.clientX-range.offsetLeft,document.onmousemove=mosMove,document.onmouseup=mosUp,rgTrack.style.transition="0s",clearInterval(timer),stopBubble()}function mosMove(e){var e=e||window.event;trackWidth=e.clientX-range.offsetLeft,currentWidth=trackWidth/range.offsetWidth*100,currentWidth<=0&&(currentWidth=0),rgTrack.style.right=100-currentWidth+"%",trackWidth>range.offsetWidth&&(rgTrack.style.right="0%")}function mosUp(){document.onmousemove=null,document.onmouseup=null,rgTrack.style.transition="1s linear",signal=!0,timer=setInterval(ctrlTrack,1e3)}function stopBubble(e){var t=e||event;window.event?t.cancelBubble=!0:t.stopPropagation()}function render(){requestAnimationFrame(render),stats.update(),plane1.position.x-=5,plane1.position.y+=4,plane2.position.x-=5,jsonData[sysTime]&&(tank_axisx=jsonData[sysTime].x,tank_axisy=jsonData[sysTime].y,tank_axisz=jsonData[sysTime].z),tank1.position.x>tank_axisx&&(tank1.position.x-=10),tank1.position.x<tank_axisx&&(tank1.position.x+=10),tank1.position.y>tank_axisy&&(tank1.position.y-=10),tank1.position.y<tank_axisy&&(tank1.position.y+=10),tank1.position.z>tank_axisz&&(tank1.position.z-=10),tank1.position.z<tank_axisz&&(tank1.position.z+=10),renderer.render(scene,camera)}function animat(){requestAnimationFrame(animat),render()}var stats=new Stats;stats.setMode(0),stats.domElement.style.position="absolute",stats.domElement.style.left="0px",stats.domElement.style.top="0px",document.getElementById("Stats-output").appendChild(stats.domElement);for(var scene=new THREE.Scene,plane1,plane2,tank1,rgMax=0,rgMin=0,rgTime=0,rgDefault=50,range=document.querySelector(".range-slider"),rgTrack=document.querySelector(".range-bar-active"),disX=0,disY=0,times=[],jsonData,distRight=0,sysTime=0,signal=!1,currentWidth=0,pastTime=0,path="{{ url_for('static', filename='threelib/Bridge2/')}}",directions=["posx","negx","posy","negy","posz","negz"],format=".jpg",skyGeometry=new THREE.BoxGeometry(5e3,5e3,5e3),materialArray=[],i=0;i<6;i++)materialArray.push(new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture(path+directions[i]+format),side:THREE.BackSide}));var skyMaterial=new THREE.MeshFaceMaterial(materialArray),skyBox=new THREE.Mesh(skyGeometry,skyMaterial);scene.add(skyBox);var mtlLoader=new THREE.MTLLoader;mtlLoader.load('{{ url_for("static", filename="threelib/models/plane2.mtl")}}',function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load('{{ url_for("static", filename="threelib/models/plane2.obj")}}',function(e){e.scale.set(.5,.5,.5),e.position.y=400,plane1=e,scene.add(e)})});var mtlLoader=new THREE.MTLLoader;mtlLoader.load('{{ url_for("static", filename="threelib/models/tanke.mtl")}}',function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load('{{ url_for("static", filename="threelib/models/tanke.obj")}}',function(e){e.scale.set(1,1,1),e.position.y=-200,tank1=e,scene.add(e)})});var mtlLoader=new THREE.MTLLoader;mtlLoader.load('{{ url_for("static", filename="threelib/models/plane1.mtl")}}',function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load('{{ url_for("static", filename="threelib/models/plane1.obj")}}',function(e){e.scale.set(.5,.5,.5),e.position.y=400,e.position.z=800,plane2=e,scene.add(e)})});var light=new THREE.PointLight(16777215);light.position.set(300,400,200),scene.add(light),scene.add(new THREE.AmbientLight(16777215));var camera=new THREE.PerspectiveCamera(40,800/600,1,6e3);camera.position.set(500,500,500),camera.lookAt(scene.position);var renderer=new THREE.WebGLRenderer;renderer.setSize(800,500),document.getElementById("WebGl-output").appendChild(renderer.domElement);var tank_axisx=0,tank_axisy=0,tank_axisz=0;orbitControls=new THREE.OrbitControls(camera,mtlLoader.domElement),orbitControls.target=new THREE.Vector3(0,0,0),orbitControls.autoRotate=!1,clock=new THREE.Clock,$.get("../static/threelib/models/position.json",function(e,t){jsonData=JSON.parse(e);for(var a in jsonData)times.push(a);times.sort(ascSort),rgMax=times[times.length-1],rgMin=times[0],sysTime=1*times[0],rgTime=Math.floor((rgMax-rgMin)/1e3),timer=setInterval(ctrlTrack,1e3)}),range.addEventListener("mousedown",mosDown),render();var controls=new THREE.OrbitControls(camera);controls.addEventListener("change",render),animat()</script></body></html>